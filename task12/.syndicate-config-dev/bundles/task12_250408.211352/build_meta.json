{"lambda-basic-execution": {"policy_content": {"Statement": [{"Action": ["logs:CreateLogGroup", "logs:CreateLogStream", "logs:PutLogEvents", "dynamodb:GetItem", "dynamodb:Query", "dynamodb:PutItem", "dynamodb:Batch*", "dynamodb:DeleteItem", "dynamodb:Scan", "cognito-idp:DescribeUserPool", "cognito-idp:GetUser", "cognito-idp:ListUsers", "cognito-idp:AdminCreateUser", "cognito-idp:AdminInitiateAuth", "cognito-idp:GetIdentityProviderByIdentifier", "cognito-idp:ListUserPools", "cognito-idp:ListUserPoolClients", "cognito-idp:AdminRespondToAuthChallenge", "cognito-idp:AdminConfirmSignUp", "cognito-idp:AdminSetUserPassword"], "Effect": "Allow", "Resource": "*"}], "Version": "2012-10-17"}, "resource_type": "iam_policy", "tags": {}}, "api_handler-role": {"predefined_policies": [], "principal_service": "lambda", "custom_policies": ["lambda-basic-execution"], "resource_type": "iam_role", "tags": {}}, "simple-booking-userpool": {"resource_type": "cognito_idp", "password_policy": {"minimum_length": 8, "require_uppercase": true, "require_symbols": true, "require_lowercase": true, "require_numbers": true}, "auto_verified_attributes": [], "sms_configuration": {}, "username_attributes": [], "custom_attributes": [], "client": {"client_name": "client-app", "generate_secret": false, "explicit_auth_flows": ["ALLOW_ADMIN_USER_PASSWORD_AUTH", "ALLOW_CUSTOM_AUTH", "ALLOW_USER_SRP_AUTH", "ALLOW_REFRESH_TOKEN_AUTH"]}, "tags": {}}, "${tables_table}": {"resource_type": "dynamodb_table", "hash_key_name": "id", "hash_key_type": "S", "read_capacity": 1, "write_capacity": 1, "global_indexes": [], "autoscaling": [], "tags": {}}, "${reservations_table}": {"resource_type": "dynamodb_table", "hash_key_name": "id", "hash_key_type": "S", "read_capacity": 1, "write_capacity": 1, "global_indexes": [], "autoscaling": [], "tags": {}}, "api-ui-hoster": {"resource_type": "s3_bucket", "acl": "private", "cors": [], "policy": {"Version": "2012-10-17", "Statement": [{"Sid": "WebSiteHostingGetObject", "Effect": "Allow", "Principal": "*", "Action": ["s3:GetObject"], "Resource": ["arn:aws:s3:::api-ui-hoster/*"], "Condition": {"IpAddress": {"aws:SourceIp": ["85.223.209.18/32"]}}}]}, "public_access_block": {"block_public_acls": true, "ignore_public_acls": true, "block_public_policy": true, "restrict_public_buckets": true}, "tags": {}, "website_hosting": {"enabled": true, "index_document": "index.html", "error_document": "error.html"}}, "Restaurant Booking API": {"definition": {"openapi": "3.0.1", "info": {"title": "Restaurant Booking API", "version": "2025-04-01T18:30:24Z"}, "servers": [{"url": "https://kh6q0kv8r9.execute-api.eu-west-1.amazonaws.com/{basePath}", "variables": {"basePath": {"default": "api"}}}], "paths": {"/reservations": {"get": {"summary": "Get all bookings", "description": "Returns complete list of restaurant reservations including table assignments and guest details.", "responses": {"200": {"description": "Successful retrieval of booking records", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Empty"}}}}}, "security": [{"authorizer": []}], "x-amazon-apigateway-integration": {"httpMethod": "POST", "uri": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:423623856894:function:api_handler/invocations", "responses": {"default": {"statusCode": "200"}}, "passthroughBehavior": "when_no_match", "type": "aws_proxy"}}, "post": {"summary": "Add new booking", "description": "Creates a new restaurant reservation with specified table, guest information and time slot.", "requestBody": {"required": true, "content": {"application/json": {"schema": {"type": "object", "properties": {"tableId": {"type": "string", "description": "Unique identifier for the reserved table"}, "clientName": {"type": "string", "description": "Full name of the booking guest"}, "contactInfo": {"type": "string", "description": "Guest contact details (phone/email)"}, "date": {"type": "string", "format": "date", "description": "Reservation date (YYYY-MM-DD)"}, "timeSlot": {"type": "string", "description": "Reserved time period (HH:MM-HH:MM)"}}, "required": ["tableId", "clientName", "date", "timeSlot"]}}}}, "responses": {"200": {"description": "Booking successfully created", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Empty"}}}}}, "security": [{"authorizer": []}], "x-amazon-apigateway-integration": {"httpMethod": "POST", "uri": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:423623856894:function:api_handler/invocations", "responses": {"default": {"statusCode": "200"}}, "passthroughBehavior": "when_no_match", "type": "aws_proxy"}}}, "/tables": {"get": {"summary": "List dining tables", "description": "Retrieves complete inventory of available dining tables with capacities.", "responses": {"200": {"description": "Table list retrieved", "headers": {"Access-Control-Allow-Origin": {"schema": {"type": "string"}}}, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Empty"}}}}}, "security": [{"authorizer": []}], "x-amazon-apigateway-integration": {"httpMethod": "POST", "uri": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:423623856894:function:api_handler/invocations", "responses": {"default": {"statusCode": "200", "responseParameters": {"method.response.header.Access-Control-Allow-Origin": "'*'"}}}, "passthroughBehavior": "when_no_match", "type": "aws_proxy"}}, "post": {"summary": "Register new table", "description": "Adds a new dining table to the restaurant's inventory system.", "requestBody": {"required": true, "content": {"application/json": {"schema": {"type": "object", "properties": {"tableId": {"type": "string", "description": "Unique table identifier"}, "capacity": {"type": "integer", "description": "Maximum seating capacity"}}, "required": ["tableId", "capacity"]}}}}, "responses": {"200": {"description": "Table successfully added", "headers": {"Access-Control-Allow-Origin": {"schema": {"type": "string"}}}, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Empty"}}}}}, "security": [{"authorizer": []}], "x-amazon-apigateway-integration": {"httpMethod": "POST", "uri": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:423623856894:function:api_handler/invocations", "responses": {"default": {"statusCode": "200", "responseParameters": {"method.response.header.Access-Control-Allow-Origin": "'*'"}}}, "passthroughBehavior": "when_no_match", "type": "aws_proxy"}}, "options": {"summary": "CORS configuration", "description": "Handles preflight requests for table management endpoints.", "responses": {"200": {"description": "CORS headers returned", "headers": {"Access-Control-Allow-Origin": {"schema": {"type": "string"}}, "Access-Control-Allow-Methods": {"schema": {"type": "string"}}, "Access-Control-Allow-Headers": {"schema": {"type": "string"}}}, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Empty"}}}}}, "x-amazon-apigateway-integration": {"responses": {"default": {"statusCode": "200", "responseParameters": {"method.response.header.Access-Control-Allow-Methods": "'*'", "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'", "method.response.header.Access-Control-Allow-Origin": "'*'"}}}, "requestTemplates": {"application/json": "{\"statusCode\": 200}"}, "passthroughBehavior": "when_no_match", "type": "mock"}}}, "/signin": {"post": {"summary": "User authentication", "description": "Validates user credentials and returns authentication token.", "requestBody": {"required": true, "content": {"application/json": {"schema": {"type": "object", "properties": {"username": {"type": "string", "description": "Registered username"}, "password": {"type": "string", "description": "Account password"}}, "required": ["username", "password"]}}}}, "responses": {"200": {"description": "Authentication successful", "headers": {"Access-Control-Allow-Origin": {"schema": {"type": "string"}}}, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Empty"}}}}}, "x-amazon-apigateway-integration": {"httpMethod": "POST", "uri": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:423623856894:function:api_handler/invocations", "responses": {"default": {"statusCode": "200", "responseParameters": {"method.response.header.Access-Control-Allow-Origin": "'*'"}}}, "passthroughBehavior": "when_no_match", "type": "aws_proxy"}}, "options": {"summary": "CORS preflight", "description": "Handles authentication endpoint preflight requests.", "responses": {"200": {"description": "CORS configuration", "headers": {"Access-Control-Allow-Origin": {"schema": {"type": "string"}}, "Access-Control-Allow-Methods": {"schema": {"type": "string"}}, "Access-Control-Allow-Headers": {"schema": {"type": "string"}}}, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Empty"}}}}}, "x-amazon-apigateway-integration": {"responses": {"default": {"statusCode": "200", "responseParameters": {"method.response.header.Access-Control-Allow-Methods": "'*'", "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'", "method.response.header.Access-Control-Allow-Origin": "'*'"}}}, "requestTemplates": {"application/json": "{\"statusCode\": 200}"}, "passthroughBehavior": "when_no_match", "type": "mock"}}}, "/signup": {"post": {"summary": "Create account", "description": "Registers new user account in the booking system.", "requestBody": {"required": true, "content": {"application/json": {"schema": {"type": "object", "properties": {"username": {"type": "string", "description": "New account username"}, "password": {"type": "string", "description": "New account password"}}, "required": ["username", "password"]}}}}, "responses": {"200": {"description": "Account created successfully", "headers": {"Access-Control-Allow-Origin": {"schema": {"type": "string"}}}, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Empty"}}}}}, "x-amazon-apigateway-integration": {"httpMethod": "POST", "uri": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:423623856894:function:api_handler/invocations", "responses": {"default": {"statusCode": "200", "responseParameters": {"method.response.header.Access-Control-Allow-Origin": "'*'"}}}, "passthroughBehavior": "when_no_match", "type": "aws_proxy"}}, "options": {"summary": "CORS preflight", "description": "Handles registration endpoint preflight requests.", "responses": {"200": {"description": "CORS configuration", "headers": {"Access-Control-Allow-Origin": {"schema": {"type": "string"}}, "Access-Control-Allow-Methods": {"schema": {"type": "string"}}, "Access-Control-Allow-Headers": {"schema": {"type": "string"}}}, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Empty"}}}}}, "x-amazon-apigateway-integration": {"responses": {"default": {"statusCode": "200", "responseParameters": {"method.response.header.Access-Control-Allow-Methods": "'*'", "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'", "method.response.header.Access-Control-Allow-Origin": "'*'"}}}, "requestTemplates": {"application/json": "{\"statusCode\": 200}"}, "passthroughBehavior": "when_no_match", "type": "mock"}}}, "/tables/{tableId}": {"get": {"summary": "Get table details", "description": "Retrieves specific information about a particular dining table.", "parameters": [{"name": "tableId", "in": "path", "required": true, "schema": {"type": "string"}, "description": "Unique table identifier"}], "responses": {"200": {"description": "Table information retrieved", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Empty"}}}}}, "security": [{"authorizer": []}], "x-amazon-apigateway-integration": {"httpMethod": "POST", "uri": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:423623856894:function:api_handler/invocations", "responses": {"default": {"statusCode": "200"}}, "passthroughBehavior": "when_no_match", "type": "aws_proxy"}}}}, "components": {"schemas": {"Empty": {"title": "Empty Schema", "type": "object"}}, "securitySchemes": {"authorizer": {"type": "apiKey", "name": "Authorization", "in": "header", "x-amazon-apigateway-authtype": "cognito_user_pools", "x-amazon-apigateway-authorizer": {"x-syndicate-cognito-userpool-names": ["${booking_userpool}"], "type": "cognito_user_pools"}}}}, "x-syndicate-openapi-tags": {"run_id": "JAP-12", "run_type": "stm", "type": "user", "user_id": "a7d5d7ab"}}, "resource_type": "api_gateway_oas_v3", "deploy_stage": "api", "tags": {"run_id": "JAP-12", "run_type": "stm", "type": "user", "user_id": "a7d5d7ab"}}, "task12_api_ui": {"name": "task12_api_ui", "resource_type": "swagger_ui", "path_to_spec": "export/on94toosg8_oas_v3.json", "target_bucket": "api-ui-hoster", "deployment_package": "swagger_ui_task12_api_ui.zip"}, "api_handler": {"name": "api_handler", "lambda_path": "D:\\matvey 3\\epam-lambda-tasks\\task11Serverless-API-Cognito-Integration\\task12", "version": "1.0.0", "func_name": "com.task11.ApiHandler", "deployment_package": "task11-1.0.0.jar", "resource_type": "lambda", "runtime": "java11", "architectures": ["x86_64"], "iam_role_name": "api_handler-role", "memory": 1024, "timeout": 300, "subnet_ids": [], "security_group_ids": [], "dependencies": [{"resource_name": "${booking_userpool}", "resource_type": "cognito_idp"}, {"resource_name": "${reservations_table}", "resource_type": "dynamodb_table"}, {"resource_name": "${tables_table}", "resource_type": "dynamodb_table"}], "event_sources": [], "env_variables": {"CLIENT_ID": {"resource_type": "cognito_idp", "resource_name": "${booking_userpool}", "parameter": "client_id"}, "RESERVATIONS_TABLE": "${reservations_table}", "TABLES_TABLE": "${tables_table}", "COGNITO_ID": {"resource_type": "cognito_idp", "resource_name": "${booking_userpool}", "parameter": "id"}, "REGION": "${region}"}, "tags": {}, "publish_version": true, "alias": "${lambdas_alias_name}", "logs_expiration": "${logs_expiration}", "snap_start": "None"}}